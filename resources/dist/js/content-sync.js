function a(s,t,e,n,r,c,i,l){var o=typeof s=="function"?s.options:s;return t&&(o.render=t,o.staticRenderFns=e,o._compiled=!0),{exports:s,options:o}}const p={props:{value:{type:String,default:"collections"}}};var u=function(){var t=this,e=t._self._c;return e("div",[e("label",{staticClass:"font-medium block mb-1"},[t._v("Type")]),e("select",{staticClass:"input",domProps:{value:t.value},on:{input:function(n){return t.$emit("input",n.target.value)}}},[e("option",{attrs:{value:"collections"}},[t._v("Collections")]),e("option",{attrs:{value:"taxonomies"}},[t._v("Taxonomies")]),e("option",{attrs:{value:"navigation"}},[t._v("Navigation")]),e("option",{attrs:{value:"globals"}},[t._v("Globals")]),e("option",{attrs:{value:"assets"}},[t._v("Assets")])])])},d=[],m=a(p,u,d);const f=m.exports;async function v(s){return(await fetch(`/cp/content-sync/options?type=${encodeURIComponent(s)}`,{headers:{"X-CSRF-TOKEN":Statamic.$config.get("csrfToken")}})).json()}async function _(s){return(await fetch("/cp/content-sync/export",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":Statamic.$config.get("csrfToken")},body:JSON.stringify(s)})).json()}async function y(s){const t=new FormData;return t.append("file",s),(await fetch("/cp/content-sync/import/preview",{method:"POST",headers:{"X-CSRF-TOKEN":Statamic.$config.get("csrfToken")},body:t})).json()}async function b(s){return(await fetch("/cp/content-sync/import/commit",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":Statamic.$config.get("csrfToken")},body:JSON.stringify(s)})).json()}const g={props:{type:{type:String,required:!0},value:{type:Array,default:()=>[]}},data(){return{options:[]}},computed:{label(){return{collections:"Collections",taxonomies:"Taxonomies",navigation:"Navigation",globals:"Globals",assets:"Asset Containers"}[this.type]||"Items"}},watch:{type:{immediate:!0,async handler(s){this.options=await v(s),this.$emit("input",[])}}},methods:{onChange(s){const t=Array.from(s.target.selectedOptions).map(e=>e.value);this.$emit("input",t)},selectAll(){this.$emit("input",[...this.options])},clearAll(){this.$emit("input",[])}}};var h=function(){var t=this,e=t._self._c;return e("div",[e("label",{staticClass:"font-medium block mb-1"},[t._v("Select "+t._s(t.label))]),e("div",{staticClass:"flex gap-2"},[e("select",{staticClass:"input w-full",attrs:{multiple:"",size:"6"},domProps:{value:t.value},on:{change:t.onChange}},t._l(t.options,function(n){return e("option",{key:n,domProps:{value:n}},[t._v(t._s(n))])}),0),e("div",{staticClass:"w-40"},[e("button",{staticClass:"btn w-full mb-2",on:{click:function(n){return n.preventDefault(),t.selectAll.apply(null,arguments)}}},[t._v("Select All")]),e("button",{staticClass:"btn w-full",on:{click:function(n){return n.preventDefault(),t.clearAll.apply(null,arguments)}}},[t._v("Clear")])])])])},C=[],x=a(g,h,C);const w=x.exports,$={components:{TypePicker:f,MultiSelect:w},data(){return{type:"collections",handles:[],sitesRaw:"",since:"",out:"export.json",busy:!1,result:null}},methods:{async runExport(){this.busy=!0;try{const s={type:this.type,handles:this.handles,sites:this.sitesRaw?this.sitesRaw.split(",").map(t=>t.trim()).filter(Boolean):[],since:this.since||null,out:this.out};this.result=await _(s)}finally{this.busy=!1}}}};var k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card p-4 space-y-4"},[e("TypePicker",{model:{value:t.type,callback:function(n){t.type=n},expression:"type"}}),t.type?e("MultiSelect",{attrs:{type:t.type},model:{value:t.handles,callback:function(n){t.handles=n},expression:"handles"}}):t._e(),e("div",{staticClass:"flex gap-3 items-end"},[e("div",{staticClass:"w-1/3"},[e("label",{staticClass:"font-medium"},[t._v("Sites (optional, comma separated)")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.sitesRaw,expression:"sitesRaw"}],staticClass:"input",attrs:{placeholder:"english,arabic"},domProps:{value:t.sitesRaw},on:{input:function(n){n.target.composing||(t.sitesRaw=n.target.value)}}})]),e("div",{staticClass:"w-1/3"},[e("label",{staticClass:"font-medium"},[t._v("Since (optional ISO8601)")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.since,expression:"since"}],staticClass:"input",attrs:{placeholder:"2025-01-01T00:00:00+03:00"},domProps:{value:t.since},on:{input:function(n){n.target.composing||(t.since=n.target.value)}}})]),e("div",{staticClass:"w-1/3"},[e("label",{staticClass:"font-medium"},[t._v("Out filename")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.out,expression:"out"}],staticClass:"input",attrs:{placeholder:"my-export.json"},domProps:{value:t.out},on:{input:function(n){n.target.composing||(t.out=n.target.value)}}})])]),e("div",[e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.busy},on:{click:t.runExport}},[t._v(t._s(t.busy?"Exporting…":"Export"))])]),t.result?e("div",{staticClass:"mt-4 text-sm"},[e("p",[t._v("Exported "),e("b",[t._v(t._s(t.result.count))]),t._v(" items → "),e("code",[t._v(t._s(t.result.path))])])]):t._e()],1)},S=[],T=a($,k,S);const R=T.exports,j={props:{diff:{type:Object,required:!0}},computed:{current(){const s={};return Object.entries(this.diff).forEach(([t,e])=>s[t]=e.current),s},incoming(){const s={};return Object.entries(this.diff).forEach(([t,e])=>s[t]=e.incoming),s}},methods:{pretty(s){return JSON.stringify(s,null,2)}}};var O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-3 text-xs grid grid-cols-1 md:grid-cols-2 gap-3"},[e("div",[e("div",{staticClass:"font-semibold mb-1"},[t._v("Current")]),e("pre",{staticClass:"bg-gray-50 p-2 rounded overflow-auto"},[t._v(t._s(t.pretty(t.current)))])]),e("div",[e("div",{staticClass:"font-semibold mb-1"},[t._v("Incoming")]),e("pre",{staticClass:"bg-gray-50 p-2 rounded overflow-auto"},[t._v(t._s(t.pretty(t.incoming)))])])])},P=[],F=a(j,O,P);const N=F.exports,A={components:{DiffViewer:N},data(){return{file:null,busy:!1,diffs:null,decisions:{},committing:!1}},methods:{onFile(s){this.file=s.target.files[0],this.diffs=null,this.decisions={}},badge(s){return s==="create"?"bg-green-100 text-green-800":s==="update"?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-800"},async preview(){if(this.file){this.busy=!0;try{const s=await y(this.file);this.diffs=s,this.decisions=Object.fromEntries(s.diffs.map(t=>[t.key,"incoming"]))}finally{this.busy=!1}}},async commit(){this.committing=!0;try{const s={type:this.diffs.type,decisions:this.diffs.diffs.map(e=>({key:e.key,action:this.decisions[e.key],incoming:e.incoming}))},t=await b(s);Statamic.$toast.success(`Updated ${t.results.updated}, Created ${t.results.created}, Skipped ${t.results.skipped}`)}finally{this.committing=!1}}}};var E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card p-4 space-y-4"},[e("div",[e("input",{attrs:{type:"file",accept:"application/json,.json"},on:{change:t.onFile}}),e("button",{staticClass:"btn ml-3",attrs:{disabled:!t.file||t.busy},on:{click:t.preview}},[t._v(t._s(t.busy?"Analyzing…":"Preview"))])]),t.diffs?e("div",{staticClass:"space-y-4"},[e("h3",{staticClass:"font-bold"},[t._v("Preview ("+t._s(t.diffs.diffs.length)+" items)")]),t._l(t.diffs.diffs,function(n){return e("div",{key:n.key,staticClass:"border rounded p-3"},[e("div",{staticClass:"flex items-center justify-between"},[e("div",[e("b",[t._v(t._s(n.key))]),e("span",{staticClass:"ml-2 text-xs px-2 py-1 rounded",class:t.badge(n.status)},[t._v(t._s(n.status))])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.decisions[n.key],expression:"decisions[item.key]"}],staticClass:"input w-40",on:{change:function(r){var c=Array.prototype.filter.call(r.target.options,function(i){return i.selected}).map(function(i){var l="_value"in i?i._value:i.value;return l});t.$set(t.decisions,n.key,r.target.multiple?c:c[0])}}},[e("option",{attrs:{value:"incoming"}},[t._v("Accept incoming")]),e("option",{attrs:{value:"current"}},[t._v("Keep current")])])]),e("DiffViewer",{attrs:{diff:n.diff}})],1)}),e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.committing},on:{click:t.commit}},[t._v(t._s(t.committing?"Committing…":"Complete Import"))])],2):t._e()])},I=[],D=a(A,E,I);const K=D.exports,X={components:{ExportPanel:R,ImportPanel:K},data(){return{tab:"export"}}};var z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"space-y-6"},[e("div",{staticClass:"card p-4"},[e("div",{staticClass:"flex gap-4"},[e("button",{staticClass:"btn",class:{"btn-primary":t.tab==="export"},on:{click:function(n){t.tab="export"}}},[t._v("Export")]),e("button",{staticClass:"btn",class:{"btn-primary":t.tab==="import"},on:{click:function(n){t.tab="import"}}},[t._v("Import")])])]),t.tab==="export"?e("ExportPanel"):e("ImportPanel")],1)},J=[],M=a(X,z,J);const U=M.exports;Statamic.booting(()=>{Statamic.$components.register("content-sync-utility",U)});
